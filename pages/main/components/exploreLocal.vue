<template>
  <view class="main">
    <view class="welfare-class">
      <view class="welfare-item" @click="skipPage('/pages/activity/flow20gb-1yuan')">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="115988">
          <path
            d="M411.7248 838.1184a40.96 40.96 0 1 0 40.96 40.96 40.96 40.96 0 0 0-40.96-40.96zM716.3648 838.1184a40.96 40.96 0 1 0 40.96 40.96 40.96 40.96 0 0 0-40.96-40.96z"
            fill="#333333" p-id="115989"></path>
          <path
            d="M696.6784 441.088H228.0448l79.872 316.4416c5.9904 23.7312 31.104 42.1888 56.32 42.1888h312.704L744.4224 532.48c12.3648-49.1008-8.6528-91.392-47.744-91.392z"
            fill="#ec6d45" p-id="115990"></path>
          <path
            d="M836.3776 348.928l-93.1328 368.8704h-360.96L289.28 348.928h547.0976m34.3808-81.92H254.8736c-39.0912 0-60.1088 42.2912-47.744 91.264l100.7872 399.36c5.9904 23.7312 31.104 42.1888 56.32 42.1888h397.184c25.216 0 50.304-18.4576 56.32-42.1888l100.7872-399.36c12.3648-48.9728-8.6528-91.264-47.744-91.264z"
            fill="#333333" p-id="115991"></path>
          <path
            d="M263.2192 454.4768a40.96 40.96 0 0 1-39.5776-30.5152l-62.9504-238.08h-17.7664a40.96 40.96 0 0 1 0-81.92h49.3056a40.96 40.96 0 0 1 39.6032 30.4896l71.0144 268.5696a40.96 40.96 0 0 1-39.6288 51.456z"
            fill="#333333" p-id="115992"></path>
        </svg>
        <view class="title">超市立减</view>
      </view>
      <view class="welfare-item" @click="skipPage('/pages/activity/daysTicket')">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="118878">
          <path d="M529.655172 900.413793h459.034483v88.275862H529.655172z" fill="#333333" p-id="118879"></path>
          <path
            d="M512 988.689655C249.114483 988.689655 35.310345 774.885517 35.310345 512S249.114483 35.310345 512 35.310345s476.689655 213.804138 476.689655 476.689655-213.804138 476.689655-476.689655 476.689655z m0-865.103448C297.842759 123.586207 123.586207 297.842759 123.586207 512s174.256552 388.413793 388.413793 388.413793 388.413793-174.256552 388.413793-388.413793S726.157241 123.586207 512 123.586207z"
            fill="#333333" p-id="118880"></path>
          <path
            d="M520.827586 326.62069m-79.448276 0a79.448276 79.448276 0 1 0 158.896552 0 79.448276 79.448276 0 1 0-158.896552 0Z"
            fill="#ec6d45" p-id="118881"></path>
          <path
            d="M697.37931 520.827586m-79.448276 0a79.448276 79.448276 0 1 0 158.896552 0 79.448276 79.448276 0 1 0-158.896552 0Z"
            fill="#ec6d45" p-id="118882"></path>
          <path
            d="M520.827586 697.37931m-79.448276 0a79.448276 79.448276 0 1 0 158.896552 0 79.448276 79.448276 0 1 0-158.896552 0Z"
            fill="#ec6d45" p-id="118883"></path>
          <path
            d="M326.62069 520.827586m-79.448276 0a79.448276 79.448276 0 1 0 158.896552 0 79.448276 79.448276 0 1 0-158.896552 0Z"
            fill="#ec6d45" p-id="118884"></path>
        </svg>
        <view class="title">影票</view>
      </view>
      <view class="welfare-item" @click="skipPage('/pages/activity/supercardGuard')">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="121875">
          <path
            d="M155.53 633.72c-6.34 0-12.75-1.67-18.57-5.19-17.02-10.28-22.49-32.4-12.22-49.42L376.5 162.06l20.16-0.23c12.61-0.1 24.15 6.18 30.87 16.85l0.07 0.12 187.35 299.95L692.75 376l10.95-14.37 18.13 0.16c11.29 0.12 22.01 5.61 28.69 14.71l146.93 199.89c11.78 16.02 8.33 38.55-7.69 50.33-16.02 11.78-38.55 8.33-50.33-7.69l-118.41-161.1-80.09 105.77-11.38 15.17-19.08-0.83a36.022 36.022 0 0 1-28.96-16.93L397.52 266.54 186.38 616.31c-6.76 11.2-18.66 17.4-30.85 17.4z"
            fill="#333333" p-id="121876"></path>
          <path
            d="M821.15 553.78c-5.23 0-10.54-1.14-15.57-3.56-17.92-8.61-25.47-30.12-16.86-48.04 12.35-25.7 18.61-53.33 18.61-82.1 0-104.69-85.17-189.86-189.86-189.86-51.4 0-99.54 20.21-135.54 56.91-13.92 14.19-36.72 14.41-50.91 0.49s-14.41-36.72-0.49-50.91c24.1-24.57 52.31-43.88 83.82-57.4 32.65-14 67.34-21.1 103.12-21.1 69.95 0 135.7 27.24 185.16 76.7 49.46 49.46 76.7 115.22 76.7 185.16 0 39.66-8.65 77.77-25.71 113.28-6.2 12.89-19.07 20.42-32.47 20.42z"
            fill="#333333" p-id="121877"></path>
          <path d="M210.79 655.51m36 0l478.31 0q36 0 36 36l0 0q0 36-36 36l-478.31 0q-36 0-36-36l0 0q0-36 36-36Z"
            fill="#ec6d45" p-id="121878"></path>
          <path d="M391.61 773.78m36 0l57.07 0q36 0 36 36l0 0q0 36-36 36l-57.07 0q-36 0-36-36l0 0q0-36 36-36Z"
            fill="#ec6d45" p-id="121879"></path>
          <path d="M585.25 773.78m36 0l220.85 0q36 0 36 36l0 0q0 36-36 36l-220.85 0q-36 0-36-36l0 0q0-36 36-36Z"
            fill="#ec6d45" p-id="121880"></path>
        </svg>
        <view class="title">景点门票</view>
      </view>
      <view class="welfare-item" @click="skipPage('/pages/activity/getSecondaryCalliper')">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="123314">
          <path
            d="M559.9744 885.504h-261.12c-36.7616 0-66.5088-29.7984-66.5088-66.5088V304.7936c0-36.7616 29.7984-66.5088 66.5088-66.5088h261.12c36.7616 0 66.5088 29.7984 66.5088 66.5088v514.2016c0.0512 36.7104-29.7472 66.5088-66.5088 66.5088z"
            fill="#ec6d45" p-id="123315"></path>
          <path
            d="M485.12 249.8048H294.912c-33.28 0-60.416 27.0848-60.416 60.416v85.8624c0 33.28 27.0848 60.416 60.416 60.416h190.1568c33.28 0 60.416-27.0848 60.416-60.416V310.2208c0-33.3312-27.0848-60.416-60.3648-60.416z m-1.0752 145.2544H295.9872V311.2448h188.1088v83.8144z"
            fill="#333333" p-id="123316"></path>
          <path
            d="M897.6384 311.3472l-112.7936-117.0432a30.67392 30.67392 0 0 0-43.4176-0.8192 30.67392 30.67392 0 0 0-0.8192 43.4176L844.8 345.0368v413.2352c0 18.8416-15.36 34.2016-34.2016 34.2016-18.8416 0-34.2016-15.36-34.2016-34.2016V482.4576c0-45.824-37.2736-83.1488-83.1488-83.1488h-36.0448V224.1536c0-53.6064-43.6224-97.2288-97.2288-97.2288h-340.48c-53.6064 0-97.2288 43.6224-97.2288 97.2288v594.7904c0 53.6064 43.6224 97.2288 97.2288 97.2288h340.48c53.6064 0 97.2288-43.6224 97.2288-97.2288V460.7488h36.0448c11.9808 0 21.7088 9.728 21.7088 21.7088v275.8656c0 52.736 42.9056 95.6416 95.6416 95.6416 52.736 0 95.6416-42.9056 95.6416-95.6416V332.6464c0-7.936-3.072-15.5648-8.6016-21.2992z m-301.824 507.5968c0 19.7632-16.0768 35.7888-35.7888 35.7888h-340.48c-19.7632 0-35.7888-16.0768-35.7888-35.7888V224.1536c0-19.7632 16.0768-35.7888 35.7888-35.7888h340.48c19.7632 0 35.7888 16.0768 35.7888 35.7888v594.7904z"
            fill="#333333" p-id="123317"></path>
        </svg>
        <view class="title">加油服务</view>
      </view>
      <view class="welfare-item" @click="skipPage('/pages/activity/getSecondaryCalliper')">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="133718">
          <path
            d="M476.74 884.267V505H446c-19.33 0-35-15.67-35-35s15.67-35 35-35h131.365c19.33 0 35 15.67 35 35s-15.67 35-35 35h-30.626v379.267h184.628c19.33 0 35 15.67 35 35s-15.67 35-35 35h-441.5c-19.33 0-35-15.67-35-35s15.67-35 35-35h186.872z m0.26-773.55V100c0-19.33 15.67-35 35-35s35 15.67 35 35v10.62c184.021 17.374 328 172.313 328 360.88 0 107.863-47.434 208.084-128.088 276.518-14.74 12.506-36.826 10.696-49.332-4.043-12.506-14.74-10.696-36.826 4.043-49.332C766.765 639.37 805 558.585 805 471.5 805 309.957 674.043 179 512.5 179S220 309.957 220 471.5c0 87.82 38.889 169.22 104.979 224.492 14.827 12.4 16.795 34.474 4.394 49.302-12.4 14.828-34.474 16.795-49.302 4.394C198.243 681.254 150 580.274 150 471.5c0-188.225 143.458-342.944 327-360.784z"
            fill="#333333" p-id="133719"></path>
        </svg>
        <view class="title">火车票</view>
      </view>
    </view>

    <view class="promotion-box">
      <view class="promotion-item" @click="skipPage('/pages/activity/flow20gb-1yuan')">
        <view class="title"><text class="em">助力</text>哪吒2</view>
        <view class="subhead">抢10元观影券</view>
        <image class="icon" src="/assets/image/home/service-icon-03.webp" mode="widthFix"></image>
      </view>
      <view class="promotion-item" @click="skipPage('/pages/activity/daysTicket')">
        <view class="title">首月仅<text class="em">1</text>元</view>
        <view class="subhead">热门会员免费领</view>
        <image class="icon" src="/assets/image/home/set-meal-icon-02.webp" mode="widthFix"></image>
      </view>
    </view>

    <view class="menu-class">
      <view class="item-class" :class="{'selected': menuClass == 'fineFood'}" @click="switchMenuClass('fineFood')">周边美食
      </view>
      <view class="item-class" :class="{'selected': menuClass == 'film'}" @click="switchMenuClass('film')">大片观影</view>
    </view>

    <!-- 周边美食 -->
    <template v-if="menuClass == 'fineFood'">
      <view class="food-item" v-for="item in 15" :key="item">
        <image class="logo" src="/assets/image/home/brand-ai.webp" mode="widthFix"></image>
        <view class="food-info">
          <view class="title">
            喜茶(北京王府井喜悦购物中心)
          </view>
          <view class="site">
            <view class="site-name">东城区</view>
            <view class="distance">
              <svg class="icon"
                viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="133965">
                <path
                  d="M648.256 850.272a32 32 0 1 1-40.704-49.386667C758.304 676.693333 832 566.037333 832 471.072 832 293.344 688.693333 149.333333 512 149.333333c-176.693333 0-320 144.010667-320 321.738667 0 115.232 108.416 253.045333 329.173333 409.493333a32 32 0 0 1-37.013333 52.213334C248.021333 765.429333 128 612.853333 128 471.072 128 258.069333 299.882667 85.333333 512 85.333333s384 172.736 384 385.738667c0 118.378667-83.701333 244.053333-247.744 379.2zM512 618.666667c-82.474667 0-149.333333-66.858667-149.333333-149.333334s66.858667-149.333333 149.333333-149.333333 149.333333 66.858667 149.333333 149.333333-66.858667 149.333333-149.333333 149.333334z m0-64a85.333333 85.333333 0 1 0 0-170.666667 85.333333 85.333333 0 0 0 0 170.666667z" p-id="133966"></path>
              </svg>
              454m
            </view>
            
          </view>
          <view class="discount-item" v-for="item in 2" :key="item">
            <view class="content">
              <text class="price">¥21</text>
              喜茶优惠券(15元)
            </view>
            <view class="quantity">
              4个优惠<svg class="icon"
                viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="134955">
                <path
                  d="M512.0512 768c3.456 0.042667 6.741333-0.554667 10.112-1.322667 1.450667-0.341333 2.858667-0.554667 4.266667-1.066666 6.954667-2.304 13.525333-5.717333 18.688-11.477334l382.762666-427.178666a42.461867 42.461867 0 0 0-3.754666-60.288c-17.834667-15.573333-45.312-13.909333-61.098667 3.712L512.0512 662.101333l-351.061333-391.722666c-15.786667-17.621333-43.264-19.285333-61.098667-3.712a42.461867 42.461867 0 0 0-3.754667 60.288l382.848 427.178666c5.162667 5.76 11.733333 9.173333 18.688 11.477334 1.408 0.512 2.816 0.725333 4.266667 1.066666 3.370667 0.768 6.656 1.365333 10.112 1.322667"
                  fill="#515152" p-id="134956"></path>
              </svg>
            </view>
          </view>
          
        </view>
      </view>
    </template>

    <!-- 大片观影 -->
    <template v-else-if="menuClass == 'film'">
      <view class="film-schedule">
        <view class="schedule-type">
          <view class="schedule-item" :class="{'selected': scheduleType == 'hotFilm'}" @click="switchScheduleType('hotFilm')">正在热映</view>
          <view class="schedule-item" :class="{'selected': scheduleType == 'awaitFilm'}" @click="switchScheduleType('awaitFilm')">即将上映</view>
        </view>
        <view class="film-item" v-for="item in 15" :key="item">
          <image class="film-cover" src="/assets/image/home/film-cover.webp" mode="widthFix"></image>
          <view class="film-info">
            <view class="title">哪吒之魔童闹海</view>
            <view class="score">评分:<text class="val">8.6</text></view>
            <view class="director">导演:饺子</view>
            <view class="protagonist">主演:谁谁谁&nbsp;谁谁谁&nbsp;谁谁谁&nbsp;谁谁谁</view>
          </view>
          <view class="buy-but">购票</view>
        </view>
      </view>
    </template>


  </view>

</template>

<script lang="ts" setup>
  import { ref } from 'vue'


  const menuClass = ref('fineFood') // 菜单类型
  const switchMenuClass = (val : string) => {
    menuClass.value = val
  }
  
  const scheduleType = ref('hotFilm') // 影片类型
  const switchScheduleType = (val : string) => {
    scheduleType.value = val
  }
  
  // 跳转页面
  const skipPage = (data: string) => {
    uni.navigateTo({
      url: data
    })
  }
</script>

<style lang="scss" scoped>
  .main {
    width: 100%;
    min-height: 100%;
    position: relative;
    box-sizing: border-box;
    padding: 3vw;
    background-color: #f5f5f5;

    .welfare-class {
      width: 100%;
      box-sizing: border-box;
      padding: 3vw 3vw;
      background-color: #fff;
      border-radius: 2vw;
      display: flex;
      justify-content: space-between;
      margin-bottom: 3vw;

      .welfare-item {
        .icon {
          width: 8vw;
          height: 8vw;
          vertical-align: middle;
          fill: currentColor;
          overflow: hidden;
          display: block;
          margin: 0 auto 2vw auto;
        }

        .title {
          width: 100%;
          font-size: 3.2vw;
          color: #333333;
        }
      }
    }

    .promotion-box {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3vw;

      .promotion-item {
        width: 48.5%;
        box-sizing: border-box;
        background-color: #fff;
        border-radius: 2vw;
        padding: 3vw 3vw 8vw 3vw;
        position: relative;

        .title {
          font-size: 4vw;
          font-weight: bold;
          color: #000;
          margin-bottom: 1vw;

          .em {
            color: #ee7f4d;
          }
        }

        .subhead {
          font-size: 3.5vw;
          color: #3b3b3b;
        }

        .icon {
          position: absolute;
          width: 12vw;
          height: 12vw;
          bottom: 2vw;
          right: 2vw;
        }
      }
    }

    .menu-class {
      width: 100%;
      position: sticky;
      top: 29vw;
      z-index: 3;
      display: flex;
      box-sizing: border-box;
      padding: 2vw 0;
      background-color: #f5f5f5;

      .item-class {
        font-size: 4vw;
        font-weight: bold;
        color: #333333;
        box-sizing: border-box;
        padding: 1vw 2vw 3vw 2vw;
        position: relative;
        margin: 0 2vw;

        &.selected {
          &:before {
            content: '';
            position: absolute;
            width: 8vw;
            height: 1vw;
            border-radius: 5vw;
            background-color: #ec6d45;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
          }
        }

      }
    }

    .food-item {
      width: 100%;
      background-color: #fff;
      border-radius: 2vw;
      box-sizing: border-box;
      padding: 3vw;
      display: flex;
      justify-content: flex-start;
      margin-bottom: 3vw;

      .logo {
        width: 15vw;
        height: 15vw;
        border-radius: 2vw;
        border: 1px solid #f0f0f0;
        margin-right: 2vw;
        flex-shrink: 0;
      }

      .food-info {
        width: 100%;

        .title {
          width: 100%;
          font-size: 4vw;
          font-weight: bold;
          color: #333333;
          overflow: hidden; // 隐藏超出部分
          text-overflow: ellipsis; // 显示省略号
          white-space: nowrap; // 不换行
          margin-bottom: 1vw;
        }
        .site {
          width: 100%;
          display: flex;
          justify-content: space-between;
          margin-bottom: 1vw;
          .site-name{
            width: 70%;
            font-size: 3.5vw;
            color: #888888;
          }
          .distance {
            width: 30%;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-size: 3.5vw;
            color: #888888;
            .icon {
              width: 5vw;
              height: 5vw;
              vertical-align: middle;
              fill: currentColor;
              overflow: hidden;
              margin-right: 1vw;
            }
          }
        }
        .discount-item {
          width: 100%;
          display: flex;
          justify-content: space-between;
          align-items: flex-end;
          margin-top: 1vw;
          .content {
            display: flex;
            align-items: flex-end;
            font-size: 3vw;
            color: #888888;
            .price {
              font-size: 4vw;
              font-weight: bold;
              color: #ed6c3d;
              margin-right: 1vw;
            }
          }
          .quantity {
            display: flex;
            align-items: center;
            font-size: 3vw;
            font-weight: bold;
            color: #333333;
            .icon {
              width: 3vw;
              height: 3vw;
              vertical-align: middle;
              fill: currentColor;
              overflow: hidden;
              color: #9b9b9b;
              margin-left: 1vw;
            }
          }
        }
        
      }
    }
    
    .film-schedule {
      width: 100%;
      box-sizing: border-box;
      padding: 3vw;
      border-radius: 2vw;
      background-color: #fff;
      .schedule-type {
        width: calc(100% + 6vw);
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin-bottom: 2vw;
        margin-left: -3vw;
        box-sizing: border-box;
        padding-bottom: 3vw;
        border-bottom: 1px solid #fbfbfb;
        .schedule-item {
          width: 50%;
          text-align: center;
          font-size: 4vw;
          color: #333333;
          position: relative;
          &.selected {
            color: #e65f53;
            &:before {
              content: '';
              width: 6vw;
              height: 1vw;
              background-color: #e65f53;
              position: absolute;
              bottom: -3vw;
              left: 50%;
              transform: translateX(-50%);
              border-radius: 2vw;
            }
          }
        }
      }
      .film-item {
        width: 100%;
        display: flex;
        align-items: flex-start;
        justify-content: flex-start;
        box-sizing: border-box;
        padding: 3vw 0;
        position: relative;
        &:before {
          content: '';
          width: calc(100% - 20vw - 4vw);
          height: 1px;
          position: absolute;
          background-color: #f1f2f1;
          right: 0;
          bottom: 0;
        }
        .film-cover {
          width: 20vw;
          margin-right: 4vw;
        }
        .film-info {
          width: calc(100% - 20vw - 4vw - 15%);
          .title {
            width: 100%;
            font-size: 4.2vw;
            font-weight: bold;
            margin-bottom: 2vw;
            color: #333333;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          }
          .score {
            width: 100%;
            font-size: 3.5vw;
            color: #333333;
            margin-bottom: 2vw;
            .val {
              color: #eb5b40;
            }
          }
          .director {
            width: 100%;
            font-size: 3.5vw;
            color: #666666;
            margin-bottom: 2vw;
          }
          .protagonist {
            width: 100%;
            font-size: 3.5vw;
            color: #666666;
            margin-bottom: 2vw;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          }
        }
        .buy-but {
          position: absolute;
          background-image: linear-gradient(0, #eb5a41, #ee7f3c);
          box-sizing: border-box;
          padding: 1.5vw 3vw;
          color: #fff;
          border-radius: 5vw;
          top: 50%;
          transform: translateY(-50%);
          right: 0vw;
          font-size: 3.5vw;
          font-weight: bold;
        }
      }
    }
  }
</style>