<template>
  <view class="main">
    <view class="input-box">
      <view class="phone-number">
        <view class="input">
          <input class="uni-input" placeholder="请输入手机号" maxlength="11" />
          <view class="modifier-but">
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="48203">
              <path d="M79.36 916.48h343.04v51.2H79.36z" fill="" p-id="48204"></path>
              <path d="M550.4 916.48h376.32v51.2H550.4z" fill="" p-id="48205"></path>
              <path d="M629.76 158.72l215.04 215.04L373.76 844.8l-215.04-215.04L629.76 158.72z m0 0" fill=""
                p-id="48206"></path>
              <path d="M716.8 74.24l215.04 215.04-64 64-215.04-215.04L716.8 74.24z m0 0" fill="" p-id="48207"></path>
              <path d="M138.24 652.8l215.04 215.04L51.2 952.32l87.04-299.52z m0 0" fill="" p-id="48208"></path>
              <path
                d="M798.72 71.68L931.84 204.8c23.04 23.04 20.48 58.88-2.56 81.92-23.04 23.04-61.44 25.6-81.92 2.56l-133.12-133.12c-23.04-20.48-23.04-58.88 2.56-81.92 23.04-23.04 58.88-25.6 81.92-2.56z m0 0"
                fill="" p-id="48209"></path>
            </svg>
          </view>
        </view>
        <view class="title">重庆移动</view>
      </view>
      <view class="more-fun">
        <view class="more-item">
          <view class="icon-item">
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="50412">
              <path
                d="M328.256 550.912c6.08 0 12.3776 0.128 18.88 0.512 102.1056 5.568 180.5696 13.9392 180.5696 13.9392s74.1248 14.592 85.7856 47.8464l2.2528-0.384c-5.5424 2.4576-11.2128 4.9664-17.0496 7.4496-113.4336 48.384-193.664 58.5472-240.96 58.5472a17.8432 17.8432 0 1 0 0 35.6864c73.8176 0 159.808-20.736 255.5392-61.632 54.5024-23.3088 95.9744-46.3616 113.1392-56.3328l2.9184-1.7024 5.9008-0.768c34.3168-4.416 62.4128-6.7584 84.3776-6.7584 6.72 0 12.864 0.2176 18.4576 0.6528 104.3968 8.3712 109.1328 60.1984 98.2656 69.6832-5.632 4.928-97.7792 59.1744-196.5824 112.0768l-11.4304 6.0928-11.456 6.0672c-84.0704 44.352-168.512 84.9536-204.9536 91.1488-81.984 13.952-341.6192-52.9152-346.8928-102.8992l-0.0896-1.5232V635.2896s28.0832-84.416 163.328-84.3904zM109.0688 576.1408a38.4 38.4 0 0 1 38.4 38.4v153.6a38.4 38.4 0 0 1-38.4 38.4h-38.4a38.4 38.4 0 0 1-38.4-38.4v-153.6a38.4 38.4 0 0 1 38.4-38.4h38.4zM601.0496 140.8C664.96 140.8 716.8 193.6768 716.8 258.9184c0 127.3856-176.7424 239.7568-196.608 251.9808l-1.152 0.704-0.64 0.3968-0.6784-0.3968-1.152-0.704C496.7424 498.6752 320 386.304 320 258.9184 320 193.664 371.8144 140.8 435.7248 140.8c32.384 0 61.6576 13.5808 82.6624 35.4688C539.392 154.3808 568.6656 140.8 601.0496 140.8z"
                fill="#16AD90" p-id="50413"></path>
            </svg>
          </view>
          <view class="title">家人充</view>
        </view>
        <view class="more-item">
          <view class="icon-item">
            <svg class="icon" style="width: 1em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;"
              viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="50788">
              <path
                d="M838.4 64H172.8c-32 0-64 32-64 64v140.8h121.6v89.6H108.8v115.2h121.6v89.6H108.8v115.2h121.6V768H108.8v128c0 32 32 64 64 64h665.6c32 0 64-32 64-64V128c0-32-32-64-64-64zM576 300.8c51.2 0 96 44.8 96 96s-44.8 96-96 96-96-44.8-96-96 38.4-96 96-96z m-224 448c0-128 96-224 224-224s224 102.4 224 224H352z"
                fill="#333333" p-id="50789"></path>
            </svg>
          </view>
          <view class="title">他人充</view>
        </view>

      </view>


    </view>

    <view class="column-title">
      <view class="title">充话费</view>
      <view class="more-info">首月返5元话费,20GB月包!<svg class="icon" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="52090">
          <path
            d="M769.216 511.936c0-3.712-1.152-7.232-1.856-10.88-0.64-2.368-0.64-4.8-1.408-7.04a50.56 50.56 0 0 0-11.136-17.344l-417.28-417.28a48.96 48.96 0 0 0-68.992-0.96 48.832 48.832 0 0 0 1.024 68.864L654.208 512l-384.64 384.768a48.768 48.768 0 0 0-1.024 68.8 48.768 48.768 0 0 0 68.864-0.96l417.28-417.344a51.2 51.2 0 0 0 11.136-17.344c0.896-2.304 0.896-4.736 1.472-7.04 0.768-3.648 1.92-7.232 1.92-10.944z"
            p-id="52091"></path>
        </svg></view>
    </view>

    <view class="topup-option">
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 20}" @click="switchTopupMenu(20)">
          <view class="title">20元</view>
          <view class="subhead">售价:20.00</view>
        </view>
      </view>
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 30}" @click="switchTopupMenu(30)">
          <view class="title">30元</view>
          <view class="subhead">售价:30.00</view>
        </view>
      </view>
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 50}" @click="switchTopupMenu(50)">
          <view class="title">50元</view>
          <view class="subhead">售价:50.00</view>
        </view>
      </view>
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 100}" @click="switchTopupMenu(100)">
          <view class="title">100元</view>
          <view class="subhead">售价:100.00</view>
        </view>
      </view>
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 200}" @click="switchTopupMenu(200)">
          <view class="title">200元</view>
          <view class="subhead">售价:200.00</view>
        </view>
      </view>
      <view class="topup-item">
        <view class="topup" :class="{'selected': currentTopupMenu == 500}" @click="switchTopupMenu(500)">
          <view class="title">500元</view>
          <view class="subhead">售价:500.00</view>
        </view>
      </view>
      <view class="custom-item">
        <view class="topup" @click="isOpenCustom = true">
          <template v-if="!isOpenCustom">
            自定义<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="48203">
              <path d="M79.36 916.48h343.04v51.2H79.36z" fill="" p-id="48204"></path>
              <path d="M550.4 916.48h376.32v51.2H550.4z" fill="" p-id="48205"></path>
              <path d="M629.76 158.72l215.04 215.04L373.76 844.8l-215.04-215.04L629.76 158.72z m0 0" fill="" p-id="48206">
              </path>
              <path d="M716.8 74.24l215.04 215.04-64 64-215.04-215.04L716.8 74.24z m0 0" fill="" p-id="48207"></path>
              <path d="M138.24 652.8l215.04 215.04L51.2 952.32l87.04-299.52z m0 0" fill="" p-id="48208"></path>
              <path
                d="M798.72 71.68L931.84 204.8c23.04 23.04 20.48 58.88-2.56 81.92-23.04 23.04-61.44 25.6-81.92 2.56l-133.12-133.12c-23.04-20.48-23.04-58.88 2.56-81.92 23.04-23.04 58.88-25.6 81.92-2.56z m0 0"
                fill="" p-id="48209"></path>
            </svg>
          </template>
          <input v-else class="custom-input" type="number" maxlength="4" placeholder="10-1000" v-model="customVal" @click.stop @blur="customInputBlur" @confirm="customInputConfirm" />
          
        </view>
      </view>
      <view class="special-item">
        <view class="topup">
          自动充
        </view>
      </view>
      <view class="special-item">
        <view class="topup">
          领3元话费券
          <text class="tag">黄金花园</text>
        </view>
      </view>
    </view>


    <view class="column-title">
      <view class="title">特惠活动</view>
    </view>

    <view class="activity-option">
      <view class="activity-item">
        <view class="activity">
          <view class="title">领券充值</view>
          <view class="subhead">低至88折</view>
          <view class="tag">立省6元</view>
        </view>
      </view>
      <view class="activity-item">
        <view class="activity">
          <view class="title">腾讯会员</view>
          <view class="subhead">加享受30GB</view>
          <view class="tag">首月1分钱</view>
        </view>
      </view>
      <view class="activity-item">
        <view class="activity">
          <view class="title">88.8元话费</view>
          <view class="subhead">月月领话费</view>
          <view class="tag">话费补贴</view>
        </view>
      </view>
    </view>

    <image class="voucher-center-ad" src="/assets/image/voucherCenter/voucherCenter-ad.webp" mode="widthFix"></image>

    <view class="remaining-sum-state">
      <view class="sum-item">话费余额:
        <text class="val">545.1</text>元
      </view>
      <view class="sum-item">到账金额:
        <text class="val">545.1</text>元
      </view>
    </view>

    <view class="topup-discounts">
      <view class="current-state">
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="54229">
          <path
            d="M749.47 411.32L500.72 660.08c-16.83 16.83-42.07 16.83-58.9 0L294.03 512.29c-16.83-16.83-16.83-42.07 0-58.9s42.07-16.83 58.9 0l119.75 119.75 217.91-217.91c16.83-16.83 42.07-16.83 58.9 0 16.81 16.82 16.81 39.26-0.02 56.09zM195.02 193.15c-173.88 173.89-173.88 459.95 0 633.84 173.89 173.88 459.96 173.88 633.84 0 173.88-173.89 173.88-459.95 0-633.84-173.9-173.89-459.95-176.69-633.84 0z"
            p-id="54230"></path>
        </svg>
        <view class="title">充值优惠</view>
        <view class="tag">默认最优优惠</view>
      </view>
      <view class="more">充值原价<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="52090">
          <path
            d="M769.216 511.936c0-3.712-1.152-7.232-1.856-10.88-0.64-2.368-0.64-4.8-1.408-7.04a50.56 50.56 0 0 0-11.136-17.344l-417.28-417.28a48.96 48.96 0 0 0-68.992-0.96 48.832 48.832 0 0 0 1.024 68.864L654.208 512l-384.64 384.768a48.768 48.768 0 0 0-1.024 68.8 48.768 48.768 0 0 0 68.864-0.96l417.28-417.344a51.2 51.2 0 0 0 11.136-17.344c0.896-2.304 0.896-4.736 1.472-7.04 0.768-3.648 1.92-7.232 1.92-10.944z"
            p-id="52091"></path>
        </svg></view>
    </view>

    <view class="top-up-box">
      <view class="vip-top-up" @click="simulationPrompt">
        立即充值9.98折
        <view class="tag">中移动支付专享</view>
      </view>
      <view class="common-top-up" @click="simulationPrompt">
        20.00&nbsp;立即支付
      </view>
    </view>

    <view class="column-title">
      <view class="title">更多充值</view>
    </view>


    <view class="more-channel">
      <view class="channel-item">
        <image class="channel-icon" src="/assets/image/voucherCenter/channel-icon-01.webp" mode=""></image>
        <view class="title">固化充值</view>
      </view>
      <view class="channel-item">
        <image class="channel-icon" src="/assets/image/voucherCenter/channel-icon-02.webp" mode=""></image>
        <view class="title">物联网</view>
      </view>
      <view class="channel-item">
        <image class="channel-icon" src="/assets/image/voucherCenter/channel-icon-03.webp" mode=""></image>
        <view class="title">家庭副卡</view>
      </view>
      <view class="channel-item">
        <image class="channel-icon" src="/assets/image/voucherCenter/channel-icon-04.webp" mode=""></image>
        <view class="title">宽带充值</view>
      </view>
      <view class="channel-item">
        <image class="channel-icon" src="/assets/image/voucherCenter/channel-icon-05.webp" mode=""></image>
        <view class="title">政企充值</view>
      </view>
    </view>

  </view>
</template>

<script lang="ts" setup>
  import { ref, onMounted } from 'vue'


  const currentTopupMenu = ref(20) // 当前菜单
  /**
   * 切换菜单
  */
  const switchTopupMenu = (val : number) => {
    currentTopupMenu.value = val
  }
  
  const customVal = ref(10) // 自定义值
  const isOpenCustom = ref(!false) // 是否打开自定义
  /**
   * 自定义输入失去焦点
*/
  const customInputBlur = () => {
    if (customVal.value < 10) {
      customVal.value = 10
    } else if (customVal.value > 1000) {
      customVal.value = 1000
    }
    isOpenCustom.value = false
  }
  /**
   * 自定义输入完成
*/
  const customInputConfirm = () => {
    if (customVal.value < 10) {
      customVal.value = 10
    } else if (customVal.value > 1000) {
      customVal.value = 1000
    }
    uni.showToast({
      title: '输入成功',
      icon: 'success'
    })
  }


  /**
    * 返回上一页
   */
  const returnNextPage = () => {
    uni.navigateBack({
      delta: 1
    })
  }
  
  /**
   * 模拟提示
*/
const simulationPrompt = () => {
  uni.showToast({
      title: '功能模拟, 尚未开发,敬请期待!',
      icon: 'none'
    })
}

  onMounted(() => {
  })
</script>

<style lang="scss" scoped>
  .main {
    width: 100%;
    box-sizing: border-box;
    position: relative;
    background-color: #fff;
    padding-bottom: 10vw;

    .input-box {
      width: calc(100% - 6vw);
      margin: 0 auto;
      box-sizing: border-box;
      padding: 3vw 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      border-bottom: 1px solid #e9e9e9;
      margin-bottom: 5vw;

      .phone-number {
        width: 55%;

        .input {
          width: 100%;
          height: 12vw;
          display: flex;
          align-items: center;
          margin-bottom: 2vw;

          .uni-input {
            font-size: 5vw;
            font-weight: bold;
            margin-right: 2vw;
          }

          .modifier-but {
            width: 7vw;
            height: 7vw;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f6f6f6;
            flex-shrink: 0;

            .icon {
              width: 3.5vw;
              height: 3.5vw;
              vertical-align: middle;
              fill: currentColor;
              overflow: hidden;
              color: #696969;
            }
          }
        }

        .title {
          font-size: 3.5vw;
          color: #999999;
        }
      }

      .more-fun {
        display: flex;
        justify-content: flex-end;
        align-items: center;

        .more-item {
          flex-shrink: 0;
          margin-left: 3vw;

          .icon-item {
            width: 8vw;
            height: 8vw;
            background-color: #f7fafe;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2vw auto 4vw auto;

            .icon {
              width: 4vw;
              height: 4vw;
              vertical-align: middle;
              fill: currentColor;
              overflow: hidden;
              color: #66a5f8;
            }
          }

          .title {
            width: 100%;
            font-size: 3.5vw;
            text-align: center;
            color: #999999;
          }
        }
      }

    }

    .column-title {
      width: calc(100% - 6vw);
      margin: 0 auto 3vw auto;
      display: flex;
      justify-content: space-between;
      align-items: center;

      // padding-bottom: 3vw;
      .title {
        font-size: 4vw;
        font-weight: bold;
      }

      .more-info {
        font-size: 3.2vw;
        color: #999999;

        .icon {
          width: 3.2vw;
          height: 3.2vw;
          vertical-align: middle;
          fill: currentColor;
          overflow: hidden;
          margin-left: 1vw;
        }
      }
    }

    .topup-option {
      width: calc(100% - 6vw);
      margin: 0 auto 3vw auto;
      display: flex;
      flex-wrap: wrap;

      .topup-item {
        width: 33.333%;

        .topup {
          width: calc(100% - 2vw);
          height: 18vw;
          margin: 0 auto 2vw auto;
          border: 1px solid #e9e9e9;
          border-radius: 1.5vw;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

          &.selected {
            position: relative;
            border-color: #48a1f8;
            background-color: #f8fbff;

            &:before {
              content: '√';
              display: block;
              width: 6vw;
              height: 5vw;
              color: #fff;
              font-size: 3.5vw;
              position: absolute;
              right: 0;
              bottom: 0;
              border-radius: 1.5vw 0 1.5vw 0;
              display: flex;
              justify-content: center;
              align-items: center;
              background-color: #48a1f8;
            }
          }

          .title {
            font-size: 4.5vw;
            color: #333333;
            margin-bottom: 2vw;
          }

          .subhead {
            font-size: 3vw;
            color: #4a90f7;
          }
        }
      }

      .custom-item {
        width: 33.333%;

        .topup {
          width: calc(100% - 2vw);
          height: 18vw;
          margin: 0 auto 2vw auto;
          border: 1px solid #e9e9e9;
          border-radius: 1.5vw;
          display: flex;
          // flex-direction: column;
          justify-content: center;
          align-items: center;
          font-size: 4vw;
          color: #333333;

          .icon {
            width: 4vw;
            height: 4vw;
            vertical-align: middle;
            fill: currentColor;
            overflow: hidden;
            color: #696969;
            margin-left: 2vw;
          }
          .custom-input {
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            padding: 2vw;
            text-align: center;
          }
        }
      }


      .special-item {
        width: 33.333%;

        .topup {
          width: calc(100% - 2vw);
          height: 18vw;
          margin: 0 auto 2vw auto;
          border: 1px solid #ead9c9;
          border-radius: 1.5vw;
          display: flex;
          // flex-direction: column;
          justify-content: center;
          align-items: center;
          font-size: 4vw;
          color: #333333;
          position: relative;
          background-color: #fefff9;

          .icon {
            width: 4vw;
            height: 4vw;
            vertical-align: middle;
            fill: currentColor;
            overflow: hidden;
            color: #696969;
            margin-left: 2vw;
          }

          .tag {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #e37767;
            border-radius: 3vw 1.5vw 0 3vw;
            box-sizing: border-box;
            padding: 0.5vw 2vw;
            font-size: 3vw;
            zoom: 0.8;
            color: #fff;
          }
        }
      }
    }


    .activity-option {
      width: calc(100% - 6vw);
      margin: 0 auto 3vw auto;
      display: flex;
      flex-wrap: wrap;

      .activity-item {
        width: 33.333%;

        .activity {
          width: calc(100% - 2vw);
          height: 18vw;
          margin: 0 auto 2vw auto;
          border: 1px solid #f3ccc5;
          border-radius: 1.5vw;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          position: relative;
          box-sizing: border-box;
          padding-top: 2vw;
          background-image: linear-gradient(180deg, #ffffff, #fae0d7);

          .title {
            font-size: 4.5vw;
            color: #333333;
            margin-bottom: 0.5vw;
          }

          .subhead {
            font-size: 3.5vw;
            color: #666666;
          }

          .tag {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #e37767;
            box-sizing: border-box;
            padding: 0.5vw 2vw;
            border-radius: 3vw 1.5vw 0vw 3vw;
            font-size: 3vw;
            zoom: 0.8;
            color: #fff;
          }
        }
      }


    }

    .voucher-center-ad {
      width: calc(100% - 6vw);
      display: block;
      margin: 0 auto 3vw auto;
    }

    .remaining-sum-state {
      width: calc(100% - 6vw);
      margin: 0 auto 3vw auto;
      display: flex;
      justify-content: space-between;
      align-items: center;

      .sum-item {
        font-size: 3.5vw;
        font-weight: bold;
        color: #000;

        .val {
          color: #367cf6;
        }
      }
    }

    .topup-discounts {
      width: calc(100% - 6vw);
      margin: 0 auto 3vw auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-sizing: border-box;
      background-color: #fafafa;
      padding: 4vw 3vw;
      border-radius: 2vw;

      .current-state {
        display: flex;
        align-items: center;

        .icon {
          width: 6vw;
          height: 6vw;
          vertical-align: middle;
          fill: currentColor;
          overflow: hidden;
          color: #4f96f7;
          margin-right: 2vw;
        }

        .title {
          font-size: 4vw;
          color: #333333;
        }

        .tag {
          font-size: 3vw;
          margin-left: 3vw;
          box-sizing: border-box;
          padding: 0.5vw 2vw;
          border: 1px solid #3e83f7;
          color: #3e83f7;
          border-radius: 1vw;
          background-color: #ebf2fe;
          zoom: 0.8;
        }
      }

      .more {
        display: flex;
        align-items: center;
        font-size: 3vw;
        color: #999999;

        .icon {
          width: 3.5vw;
          height: 3.5vw;
          vertical-align: middle;
          fill: currentColor;
          overflow: hidden;
          color: #dddddd;
          margin-left: 1vw;
        }
      }
    }

    .top-up-box {
      position: sticky;
      left: 0;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 3vw 3vw 8vw 3vw;
      background-color: #fff;

      .vip-top-up {
        width: 100%;
        height: 12vw;
        box-sizing: border-box;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        background-image: linear-gradient(180deg, #4d93f7, #569bf7);
        font-size: 4vw;
        font-weight: bold;
        color: #fff;
        border-radius: 10vw;
        margin-bottom: 5vw;
        box-shadow: 0 1vw 1vw #4d93f7;

        .tag {
          position: absolute;
          top: -3vw;
          left: 77%;
          transform: translateX(-50%);
          background-image: linear-gradient(0deg, #df5c35, #e88362);
          box-sizing: border-box;
          padding: 1vw 2vw;
          font-size: 3vw;
          border-radius: 3vw 3vw 3vw 0vw;
          word-break: keep-all;
        }
      }

      .common-top-up {
        width: 100%;
        height: 12vw;
        box-sizing: border-box;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 2px solid #367cf6;
        font-size: 4vw;
        font-weight: bold;
        color: #367cf6;
        border-radius: 10vw;
      }
    }

    .more-channel {
      width: 100%;
      display: flex;

      .channel-item {
        width: 20%;

        .channel-icon {
          width: 10vw;
          height: 10vw;
          display: block;
          margin: 0 auto 2vw auto;
        }

        .title {
          width: 100%;
          text-align: center;
          font-size: 3vw;
          color: #333333;
        }
      }
    }

  }
</style>